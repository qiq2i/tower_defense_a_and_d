## Minecraft小游戏：塔防大作战 🏰🛡️ 项目地址
https://github.com/qiq2i/tower_defense_a_and_d.git

## 联系作者
### 小棋孜
主要处理该玩法的数据包~
[Bilibili空间](https://space.bilibili.com/355336076)

## 新手必读
### 游戏介绍及规则
Minecraft多人小游戏《塔防攻守战》Tower Defense: Attack & Defense，玩法接近Hypixel服务器的towerwar，至少需要2名玩家进行游玩。Minecraft版本为1.20.6，基于原版数据包。
玩家可以在自己的游戏场地上指定位置建立防御塔来阻挡怪物，同时也可以在所有其他玩家的游戏场地上召唤怪物，若玩家自己怪物成功攻入其他玩家的终点，则可窃取其1点生命值。玩家生命值低于0时，游戏失败。

下面是游戏中各个要点介绍：
- **生命值**
    初始20点，通过攻入他人终点窃取。
- **金币**
    初始100金币，用于建筑与升级防御塔、释放怪物，击败怪物和周期性收入可获得。
- **收入（金币来源）**
    每10秒自动获得初始设定的10金币，释放怪物能提升收入。
- **防御塔**
    防御塔需金币建造与升级，消灭怪物后回馈金币。
- **怪物**
    用于攻击对手，攻破终点窃取生命值，同时增加玩家的收入。

## 数据包详情
### 核心功能模块
- **全局游戏状态(简略)**
函数`qiq2i_map2:game_state/...`管理游戏的开始与暂停状态。
- **功能**
函数`qiq2i_map2:function/...`包含多个小功能。
    - **add_summon_mob_count**
    增加玩家释放怪物的数量至存储标记（用于调整玩家释放怪物的各种数据）。
    - **get_alive_player_count**
    获取存活玩家数量。
    - **get_player_facing_pos**
    获取朝向的非空气方块的坐标。
    - **health_display**
    每个玩家的血量显示。
    - **reload_mob_data**
    重新加载玩家释放的怪物数据，生命值、花费金币、掉落金币和增加收入值。
    怪物数据=基础怪物数据×(释放怪物的数量/20 + 1)
    - **set_playerid_score**
    设置指定编号的玩家在指定记分板上的分数。
    - **mob**
        - **display_mob_name**
        显示怪物名称及怪物生命值，写在怪物的名称中。
    - **particles**
    在指定位置显示粒子效果。
    - **summon**
    玩家释放怪物，包含归属玩家，金币数量等等的判断。
    - **text_display**
    临时文本展示显示文字。
    - **tower_build**
    玩家建防御塔，包含归属玩家，金币数量及地点等等的判断。
    - **tower_remove**
    玩家移除防御塔，包含归属玩家及地点等等的判断。
    - **tower_updata**
    玩家升级防御塔，包含归属玩家，金币数量及地点等等的判断。
    - **ui**
        - **display_mob_in_ui**
        打开ui时的文本显示，适用于怪物数据。
        - **display_tower_in_ui**
        打开ui时的文本显示，适用于防御塔数据。
        - **display_tower_in_ui**
        打开ui时的文本显示，适用于升级防御塔数据，对比当前等级和升级后的等级各项数据的对比。
- **玩家操作使用的物品(简略)**
函数`qiq2i_map2:player_item/...`负责处理用于释放怪物及操作防御塔的胡萝卜钓竿。
- **存储**
函数`qiq2i_map2:storage/...`管理怪物和防御塔的存储信息。
    - **tower**
    防御塔各个等级的基础数据存储。
    - **mob**
    怪物各个基础数据存储。
- **塔防内容(简略)**
函数`qiq2i_map2:tower_defense/...`控制防御塔与怪物的行动。
- **UI逻辑(简略)**
函数`qiq2i_map2:ui/...`提供释放怪物、建造和升级防御塔等功能，支持通过鼠标操作和Shift键关闭UI，但目前UI设计较为基础。
玩家可以通过鼠标左键选择操作，右键返回或取消，以及按下Shift键（模拟脱离骑乘操作）来关闭UI界面。

需要注意的是，当前UI设计较为基础，针对性较强，可能缺乏一定的灵活性以适应更广泛的操作需求。在该UI逻辑中需要注意：建造防御塔过程需额外输入坐标位置（通过视线追踪获取），而升级防御塔则需提供防御塔的唯一标识(UUID)。

比较好看且完美的UI可参考[创小业](https://space.bilibili.com/133430292)发布的全球商店：
- [专栏](https://www.bilibili.com/read/cv34680702)
- [项目地址](https://github.com/HeartingBe/GlobalShop_v3)



## 声明与协议

### 开源许可
本项目遵循 GNU GENERAL PUBLIC LICENSE 3

### 最终解释权
本项目文档、规则及功能的最终解释权归项目作者所有。对于任何因使用本项目导致的直接或间接损失，作者不承担任何责任。